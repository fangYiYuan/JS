<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="IE=edge, chrome=1">
    <title>throttle</title>
    <style>
    </style>
</head>

<body>
  
  <input type="text">
  <script>
    document.getElementsByTagName('input')[0].addEventListener('input', throttle(changeVal), false)
    function changeVal(e) {
      let val = e.target.value
      console.log('=>', val)
    }
    // 第一种：使用时间戳
    // function throttle(fn, wait = 1000) {
    //   let now, last = 0
    //   return function() {
    //     now = +new Date()
    //     if(now - last > wait) {
    //       fn.apply(this, arguments)
    //       last = now
    //     }
    //   }
    // }
    // 2.定时器方法
    function throttle(fn, wait = 2000) {
      let timer, last = 0
      let i = 0
      return function() {
        if (!timer) {
          timer = setTimeout(() => {
            timer = null
            fn.apply(this, arguments)
          }, wait)
        }
      }
    }
  </script>
</body>

</html>
